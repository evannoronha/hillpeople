name = "hillpeople-newsletter"
main = "src/index.ts"
compatibility_date = "2025-04-15"
compatibility_flags = ["nodejs_compat"]

[triggers]
crons = ["*/30 * * * *"]  # Every 30 minutes

[vars]
STRAPI_API_URL = "https://journal.hillpeople.net"
FRONTEND_URL = "https://hillpeople.net"
SENDER_EMAIL = "web@hillpeople.net"
WORKER_URL = "https://hillpeople-newsletter.evannoronha.workers.dev"

# Secrets (set via `wrangler secret put`):
# - STRAPI_NEWSLETTER_TOKEN: API token for reading subscribers and updating posts
# - RESEND_API_KEY: API key from Resend (https://resend.com)
# - GODMODE_TOKEN: Auth token for /godmode endpoint (bypasses all filters)
