---
// Newsletter signup form component
// Only rendered when ?newsletter=enabled query param is present
const strapiUrl = import.meta.env.STRAPI_API_URL;
---

<div id="newsletter-signup" class="bg-inverse p-6 rounded-lg max-w-md mx-auto my-8">
  <h3 class="text-xl font-bold mb-2">Subscribe to Hill People</h3>
  <p class="text-sm mb-4 opacity-80">Get notified when we publish new posts.</p>

  <form id="newsletter-form" class="flex flex-col gap-3" data-strapi-url={strapiUrl}>
    <input
      type="email"
      name="email"
      placeholder="your@email.com"
      required
      class="px-4 py-2 rounded text-[var(--color-text)] bg-[var(--color-bg)] border border-[var(--color-accent)] focus:outline-none focus:ring-2 focus:ring-[var(--color-accent)]"
    />
    <button
      type="submit"
      class="bg-[var(--color-accent)] text-[var(--color-inverse-text)] px-4 py-2 rounded font-semibold hover:opacity-90 transition"
    >
      Subscribe
    </button>
  </form>

  <p id="newsletter-message" class="mt-3 text-sm hidden"></p>

  <p class="text-xs mt-4 opacity-60">
    By subscribing, you agree to our <a href="/privacy" class="underline hover:opacity-80">Privacy Policy</a>.
  </p>
</div>

<script src="../scripts/newsletter-signup.ts"></script>
